<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ page.title | default: site.title }}</title>
  <style>
    :root {
      --accent: #2563eb;
      --accent-light: #dbeafe;
      --bg: #ffffff;
      --bg-secondary: #f8fafc;
      --border: #e2e8f0;
      --text: #1e293b;
      --text-muted: #64748b;
      --code-bg: #f1f5f9;
      --sidebar-width: 260px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", sans-serif;
      color: var(--text);
      line-height: 1.7;
      display: flex;
      min-height: 100vh;
    }
    /* Sidebar */
    .sidebar {
      width: var(--sidebar-width);
      background: var(--bg-secondary);
      border-right: 1px solid var(--border);
      padding: 1.5rem 1rem;
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      overflow-y: auto;
    }
    .sidebar-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--accent);
      text-decoration: none;
      display: block;
      margin-bottom: 0.25rem;
    }
    .sidebar-subtitle {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-bottom: 1.5rem;
      display: block;
    }
    .sidebar h3 {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--text-muted);
      margin: 1.25rem 0 0.5rem;
    }
    .sidebar ul { list-style: none; }
    .sidebar li { margin-bottom: 0.15rem; }
    .sidebar a {
      color: var(--text);
      text-decoration: none;
      font-size: 0.85rem;
      display: block;
      padding: 0.3rem 0.6rem;
      border-radius: 4px;
      transition: background 0.15s;
    }
    .sidebar a:hover, .sidebar a.active { background: var(--accent-light); color: var(--accent); }
    /* Main */
    .main {
      margin-left: var(--sidebar-width);
      flex: 1;
      padding: 2.5rem 3rem;
      max-width: 900px;
    }
    /* Typography */
    h1 { font-size: 2rem; margin-bottom: 0.75rem; line-height: 1.2; }
    h2 { font-size: 1.4rem; margin: 2rem 0 0.75rem; padding-bottom: 0.3rem; border-bottom: 1px solid var(--border); }
    h3 { font-size: 1.1rem; margin: 1.5rem 0 0.5rem; }
    p { margin-bottom: 1rem; }
    /* Images */
    img {
      max-width: 100%;
      border: 1px solid var(--border);
      border-radius: 6px;
      margin: 0.5rem 0 1rem;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
    }
    /* Tables */
    table { border-collapse: collapse; width: 100%; margin: 1rem 0; }
    th, td { border: 1px solid var(--border); padding: 0.5rem 0.75rem; text-align: left; font-size: 0.9rem; }
    th { background: var(--bg-secondary); font-weight: 600; }
    /* Code */
    code {
      background: var(--code-bg);
      padding: 0.15em 0.35em;
      border-radius: 3px;
      font-size: 0.88em;
    }
    pre {
      background: var(--code-bg);
      padding: 1rem;
      border-radius: 6px;
      overflow-x: auto;
      margin: 1rem 0;
      border: 1px solid var(--border);
    }
    pre code { background: none; padding: 0; }
    /* ASCII art blocks */
    .ascii-art {
      font-family: "Courier New", Courier, monospace;
      font-size: 0.8rem;
      line-height: 1.3;
      white-space: pre;
      overflow-x: auto;
    }
    /* Lists */
    ul, ol { margin: 0.5rem 0 1rem 1.5rem; }
    li { margin-bottom: 0.25rem; }
    /* Mermaid */
    .mermaid { margin: 1rem 0; text-align: center; }
    /* Info/callout boxes */
    blockquote {
      border-left: 3px solid var(--accent);
      background: var(--accent-light);
      padding: 0.75rem 1rem;
      margin: 1rem 0;
      border-radius: 0 6px 6px 0;
      font-size: 0.9rem;
    }
    blockquote p { margin: 0; }
    /* Screenshot step */
    .step-heading { color: var(--accent); }
    /* Footer */
    footer {
      margin-top: 3rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
      font-size: 0.8rem;
      color: var(--text-muted);
    }
    /* Responsive */
    @media (max-width: 768px) {
      .sidebar { position: static; width: 100%; border-right: none; border-bottom: 1px solid var(--border); }
      .main { margin-left: 0; padding: 1.5rem; }
      body { flex-direction: column; }
    }
  </style>
</head>
<body>
  <nav class="sidebar">
    <a href="{{ '/' | relative_url }}" class="sidebar-title">SG/Send QA</a>
    <span class="sidebar-subtitle">Automated Test Documentation</span>

    <h3>Navigation</h3>
    <ul>
      <li><a href="{{ '/' | relative_url }}" {% if page.url == '/' or page.url == '/pages/' %}class="active"{% endif %}>Home</a></li>
      <li><a href="{{ '/pages/use-cases/' | relative_url }}" {% if page.url == '/pages/use-cases/' %}class="active"{% endif %}>Use Cases</a></li>
      <li><a href="{{ '/pages/roadmap/' | relative_url }}" {% if page.url contains 'roadmap' %}class="active"{% endif %}>Roadmap</a></li>
    </ul>

    <h3>Use Cases</h3>
    <ul>
      {% for uc in site.navigation.use_cases %}
      <li><a href="{{ uc.url | relative_url }}" {% if page.url contains uc.id %}class="active"{% endif %}>{{ uc.title }}</a></li>
      {% endfor %}
    </ul>

    <h3>Links</h3>
    <ul>
      <li><a href="https://send.sgraph.ai" target="_blank">SG/Send App</a></li>
      <li><a href="https://github.com/the-cyber-boardroom/SG_Send__QA" target="_blank">GitHub Repo</a></li>
    </ul>
  </nav>

  <main class="main">
    {{ content }}

    <footer>
      <p>SG/Send QA &mdash; Living documentation generated from automated browser tests</p>
      <p>*Last updated: {{ page.last_modified_at | date: '%Y-%m-%d %H:%M' }}*</p>
    </footer>
  </main>

  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    // Jekyll renders ```mermaid as <pre><code class="language-mermaid">
    // Mermaid.js needs <pre class="mermaid"> â€” transform before init
    document.querySelectorAll('code.language-mermaid').forEach(function(code) {
      var pre = code.parentElement;
      pre.className = 'mermaid';
      pre.textContent = code.textContent;
      pre.style.background = 'none';
      pre.style.border = 'none';
    });
    mermaid.initialize({ startOnLoad: true, theme: 'neutral' });
  </script>
</body>
</html>
